<UserControl
    x:Class="Markup.Programming.Samples.PasswordSample"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:p="http://markupprogramming.codeplex.com/markup/programming"
    Height="300" Width="300">
    <Grid>
        <StackPanel>
            <StackPanel.Resources>
                <SolidColorBrush Color="Red" x:Key="RedBrush"/>
                <SolidColorBrush Color="Green" x:Key="GreenBrush"/>
            </StackPanel.Resources>
            <TextBlock FontSize="20" Text="The password is: xyzzy"/>
            <TextBox FontSize="20" Name="Password"/>
            <Grid Name="StatusBackground">
                <TextBlock FontSize="20" Name="Status" Foreground="White" FontWeight="Bold"/>
                <p:Attached.Operations>
                    <p:ChangedHandler Value="{Binding Text, ElementName=Password}">
                        <p:Eval Path="$isRight = @EventArgs.NewValue == 'xyzzy'"/>
                        <p:Eval Path="@AssociatedObject.Children[0].Text = $isRight ? 'On the money!' : 'Guess again.'"/>
                        <p:Set Path="@AssociatedObject.Background">
                            <p:Operator Op="Conditional">
                                <p:Get Var="isRight"/>
                                <p:Get Source="{StaticResource GreenBrush}"/>
                                <p:Get Source="{StaticResource RedBrush}"/>
                            </p:Operator>
                        </p:Set>
                    </p:ChangedHandler>
                </p:Attached.Operations>
            </Grid>
        </StackPanel>
    </Grid>
</UserControl>
